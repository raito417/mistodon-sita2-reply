# mistodon-sita2-reply

したことを記録するmastodonのbot、[@sita@mistodon.cloud](https://mistodon.cloud/@sita)です。

Google Cloud Platform, Google Cloud Function上で実行されています。

こちらは[get-notification](https://github.com/raito417/mistodon-sita2-get-notification)で取得した通知に対して、返信を行う関数です。

# 使い方

## したことを記録する

「{したこと}　@sita」とbotにメンションしてください。

botがデータベースに記録し、リプライを返します。

例）あなた「起床　@sita」→bot「@あなた　おつパオ
2023/05/17 08:00以来、1日1時間1分ぶり11回目の起床です。」

## 最後にいつしたか確認する

「{したこと}　@sita　のいつ？」とbotにメンションしてください。

botがデータベースを参照し、最後にいつしたかをリプライします。

例）あなた「散髪　@sita　のいつ？」→bot「@あなた　最後に散髪したのは、5日6時間14分前（2023/05/12 12:14）の7回目です。」

## した日時をリストで表示する

「{したこと}　@sita　のいつ？　\[昇順|降順]」とbotにメンションしてください。

botがしたことのリストを昇順又は降順でリプライします。

例）あなた「散髪　@sita　のいつ？　昇順」

→bot「@あなた　散髪の昇順から7回分の記録です。
01. 2021/11/15 06:24
02. 2022/01/25 06:44
03. 2022/04/04 04:21
04. 2022/06/08 08:53
05. 2022/09/26 02:31
06. 2022/11/14 04:00
07. 2023/05/12 12:14」

##　したことのまとめを表示する

「{したこと}　@sita　まとめ」とbotにメンションしてください。

botがしたことの概要をリプライします。

例）あなた「散髪　@sita　まとめ」

→bot「@あなた　散髪のまとめ
- 初回：2021/11/15(543日前)
- 最新：2023/05/12(9日前) 
- した回数：7回
- 1週間の平均回数（全期間）：0.090」

## したことを個別で削除する

**この操作は取り消すことができません**

「{したこと}　@sita　消して」とメンションしてください。

例）あなた「テスト　@sita　消して」→bot「@あなた　テストのsitaをすべて削除しました。」

## 自分のしたことをすべて削除する

**！！この操作は取り消すことができません！！**

「@sita　delete」とbotにメンションしてください。

例）あなた「@sita　delete」→bot「@あなた　deleted」

その他の使い方は[@sita@mistodon.cloud](https://mistodon.cloud/@sita)の固定トゥートを参照。


## スペシャルサンクス

デバッグに協力していただいた雲鯖のみなさん

CC0ライセンスで公開されています。

## 管理人

[@raito@mistodon.cloud](https://mistodon.cloud/@raito)

## アップデート

- 1.1
  - 実行環境を自宅raspberrypiからherokuに移行し、可用性が向上しました。
- 1.2
  - karino2氏の協力により、少し変わりました
- 1.3 2022/07/05
  - sitaのまとめ機能を実装
- 2.0 2022/11/17
  - 実行環境をherokuからGCP Google Cloud Functionsに変更しました
- 2.1 2023/05/17
  - のいつ？にキーワードに反応してした日時のリストを返す機能を追加
### その他の変更予定